<html>
    <head>
        <meta charset="utf-8">
        <title>Get 1000</title>
        <style>

        .router
  	    {
  		    position: absolute;
  		    left: 500px;
  		    top: 500px;
  		    z-index: 0;
  	    }

            body { 
                /* Градиент */ 
                background: linear-gradient(#2900bb, #ff007d) fixed;
                }

            @font-face {
                font-family: DGO; 
                src: url(fonts/DGO.ttf); 
                }

            h1{
                font-family: DGO;
                color: azure;
                margin-top: 2%;
                margin-left: 0%;
                font-size: 24px;
            }

            .texthalf
            {
                float: right;
                width: 50%;
            }
            .buttonfield{margin-top: 5%;}
            .right_button_container{float:right; width: 50%;}
            .left_button_container{float: left; width: 50%;}
            .button{width: 60%; height: 5%;margin-left: 18%;margin-top: 10%;
                    background-color: rgb(37, 37, 37); border-radius: 25px;
                    display: flex;
                    align-items: center; font-family: DGO; font-size: 12px; color: rgb(255, 255, 255);
                    justify-content: center;
            }
            .essahalf{width: 50%;float: left;display: flex;align-items: center;justify-content: center;}

        </style>

        <script>
            function updateCourse() {
                var xhr = new XMLHttpRequest();
                xhr.setRequestHeader()
                xhr.onreadystatechange = function(){
                                        console.log(xhr)
                                        }
                xhr.open('GET', 'http://www.cbr.ru/scripts/XML_daily.asp', true)
                xhr.send()
            }
        window.onload = updateCourse;
        </script>
    </head>
    <body>

        <div class = "router" id = "router_image" top =0 left = 0>
            <img src="img/vlad.png" alt="альтернативный текст" width="100px" height="100px">
        </div>
        <div class = "essahalf">
            <img src="img/esse.png">
        </div>
        <div class="texthalf">
            <h1 style="font-size:72px; margin-top: 10%">Во что превратилась тыща?</h1>
            <h1>21 июля 2021 года я вложил в пиво ESSA 1000 (одну тычячу) рублей</h1>
            <h1>По сегодняшнему курсу это 20 бутылок пива</h1>
            <div class = "buttonfield">
                <div class = "left_button_container">
                    <div class = "button" onclick="alert('Хуй тебе')">
                        Получить 20 бутылок пива
                    </div>
                </div>
                <div class = "right_button_container">
                    <div class="button" onclick="alert('Хуй тебе')">
                        Получить 1000 рублей
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">


			let global_mouse_x = 0;
			let global_mouse_y = 0;
			
			var counter = 0;
			const windowOuterWidth = window.outerWidth;
			const windowOuterHeight = window.outerHeight;
			
			function init() {
    			if (document.layers) document.captureEvents(Event.MOUSEMOVE);
    			document.onmousemove = mousemove;
			}
			function mousemove(event) {
    			var mouse_x = mouse_y = 0;
    			if (document.attachEvent != null) {
        			mouse_x = window.event.clientX;
        			mouse_y = window.event.clientY;
    			} else if (!document.attachEvent && document.addEventListener) {
        			mouse_x = event.clientX;
        			mouse_y = event.clientY;
    			}
    			global_mouse_x = mouse_x;
    			global_mouse_y = mouse_y;
			}
			init()

			let router_object = document.getElementById("router_image");

			function getDistance(x1, y1, x2, y2)
			{
				return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
			}

			function updateCoords()
			{
				// console.log(global_mouse_x, global_mouse_y);
				let router_x = router_object.style.left;
				let router_y = router_object.style.top;
				// console.log(router_x);
				let len_x = router_x.length;
				router_x = router_x.substring(0, router_x.length- 2);
				router_x = Number(router_x) + 86;
				let len_y = router_y.length;
				router_y = router_y.substring(0, router_y.length - 2);
				router_y = Number(router_y) + 86;

				// console.log(getDistance(router_x, router_y, global_mouse_x, global_mouse_y))
				let delta_x = global_mouse_x - router_x;
				let delta_y = global_mouse_y - router_y;
				// console.log(delta_x / 10, delta_y / 10);

				let new_cord_x = (router_x + Math.floor(delta_x / 50 * (1 - counter / 10)) - Math.floor(delta_x * counter / 200));
				let new_cord_y = (router_y + Math.floor(delta_y / 50 * (1 - counter / 10)) - Math.floor(delta_y * counter / 200));

				if (getDistance(router_x , router_y , global_mouse_x, global_mouse_y) < 50)
				{
					counter = 10;
				}
				if (new_cord_x < 0){new_cord_x = 0;}
				if (new_cord_x > windowOuterWidth - 172){new_cord_x = windowOuterWidth - 172;}
				if (new_cord_y < 0) { new_cord_y = 0;}
				if (new_cord_y > windowOuterHeight - 172) {new_cord_y = windowOuterHeight - 			172}
				router_object.style.left = new_cord_x  - 86 + 'px';
				router_object.style.top = new_cord_y - 86 + 'px';
				if (counter > 0) counter -= 0.1;
				// console.log(router_object.style.top)
			}
			setInterval(updateCoords, 1000/50)
		</script> 
    </body>
</html>